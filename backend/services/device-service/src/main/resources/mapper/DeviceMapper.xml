<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.novax.device.mapper.DeviceMapper">

    <resultMap id="BaseResultMap" type="com.novax.device.entity.Device">
        <id column="id" property="id"/>
        <result column="device_code" property="deviceCode"/>
        <result column="station_id" property="stationId"/>
        <result column="device_type" property="deviceType"/>
        <result column="device_status" property="deviceStatus"/>
        <result column="manufacturer" property="manufacturer"/>
        <result column="model" property="model"/>
        <result column="rated_power" property="ratedPower"/>
        <result column="rated_voltage" property="ratedVoltage"/>
        <result column="rated_current" property="ratedCurrent"/>
        <result column="connector_count" property="connectorCount"/>
        <result column="ip_address" property="ipAddress"/>
        <result column="firmware_version" property="firmwareVersion"/>
        <result column="last_online_time" property="lastOnlineTime"/>
        <result column="last_offline_time" property="lastOfflineTime"/>
        <result column="total_charging_count" property="totalChargingCount"/>
        <result column="total_charging_energy" property="totalChargingEnergy"/>
        <result column="total_working_hours" property="totalWorkingHours"/>
        <result column="install_date" property="installDate"/>
        <result column="warranty_expire_date" property="warrantyExpireDate"/>
        <result column="maintenance_cycle" property="maintenanceCycle"/>
        <result column="last_maintenance_time" property="lastMaintenanceTime"/>
        <result column="remark" property="remark"/>
        <result column="create_time" property="createTime"/>
        <result column="update_time" property="updateTime"/>
        <result column="deleted" property="deleted"/>
    </resultMap>

    <select id="findByStationId" resultMap="BaseResultMap">
        SELECT * FROM device
        WHERE station_id = #{stationId}
        AND deleted = 0
        ORDER BY create_time DESC
    </select>

    <select id="findByStatus" resultMap="BaseResultMap">
        SELECT * FROM device
        WHERE device_status = #{deviceStatus}
        AND deleted = 0
        ORDER BY create_time DESC
    </select>

    <select id="countByStationId" resultType="java.lang.Integer">
        SELECT COUNT(*) FROM device
        WHERE station_id = #{stationId}
        AND deleted = 0
    </select>

</mapper>
